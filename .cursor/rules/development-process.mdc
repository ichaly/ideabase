---
description: 
globs: 
alwaysApply: false
---
# 开发流程与质量要求

## 增量开发方法
1. 先实现最小可用功能
2. 编写完善的测试用例
3. 逐步添加高级特性
4. 持续重构优化代码

## 测试策略
- 单元测试覆盖率不低于80%
- 使用go-sqlmock模拟数据库交互
- 集成测试使用testcontainers-go在真实环境验证
- 新增功能必须包含相应测试用例

## 性能考量
- 优化SQL生成，减少不必要的查询
- 实现高效的缓存策略
- 关注内存使用和GC压力
- 关键路径需进行基准测试

## 代码重构原则
- 当文件超过500行时，将其拆分成更小的文件
- 当函数变得过长时，将其拆分成更小的函数
- 提取可复用逻辑到公共模块
- 保持低耦合、高内聚的设计

## SQL编译优化
- 优先使用CTE（WITH语句）简化复杂查询
- 减少子查询和JOIN操作
- 确保生成的SQL适用于目标数据库（PostgreSQL/MySQL）
- 添加适当的索引提示
- 使用LEFT OUTER JOIN LATERAL简化SQL逻辑
