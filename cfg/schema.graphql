# IdeaBase GraphQL Schema
# 版本: 20250312000221

# 自定义标量类型
scalar Json
scalar Cursor
scalar DateTime

# 排序方向枚举，包含NULL值处理
enum SortDirection {
  ASC
  DESC
  ASC_NULLS_FIRST
  DESC_NULLS_FIRST
  ASC_NULLS_LAST
  DESC_NULLS_LAST
}

# 空值条件枚举
enum IsInput {
  NULL
  NOT_NULL
}

# ------------------ 分页相关类型 ------------------

# 页面信息（用于游标分页）
type PageInfo {
  hasNext: Boolean!  # 是否有下一页
  hasPrev: Boolean!  # 是否有上一页
  start: Cursor  # 当前页第一条记录的游标
  end: Cursor  # 当前页最后一条记录的游标
}

# 聚合分组选项
input GroupBy {
  fields: [String!]  # 分组字段
  having: Json  # 分组过滤条件
  limit: Int  # 分组结果限制
  sort: Json  # 分组结果排序
}

# 组织表
type Organizations {
  createdAt: DateTime!
  # 组织名称
  name: String!
  id: Int!
  # 父组织ID
  parentId: Int
  # 父组织ID
  parent: Organizations
  # 父Organizations对象
  parent1: Organizations!
}

# 用户表
type Users {
  updatedAt: DateTime
  createdAt: DateTime!
  # 用户名
  name: String!
  id: Int!
  # 邮箱
  email: String!
  # 关联的Comments列表
  commentsList: [Comments]!
}

# 文章表
type Posts {
  # 标题
  title: String!
  id: Int!
  # 内容
  content: String
  tagList: String!
  createdAt: DateTime!
  # 作者ID
  userId: Int!
  # 多对多关联的Tags列表
  tagsList: [Tags]!
  # 作者ID
  users: Users!
  # 关联的PostTags列表
  postTagsList: [PostTags]!
}

# 文章标签关联表
type PostTags {
  createdAt: DateTime!
  # 文章ID
  postId: Int!
  # 标签ID
  tagId: Int!
  # 标签ID
  tags: Tags!
  # 文章ID
  posts: Posts!
}

# 评论表
type Comments {
  createdAt: DateTime!
  # 评论内容
  content: String!
  # 评论者
  userId: Int!
  # 父评论ID
  parentId: Int
  id: Int!
  # 评论文章
  postId: Int!
  # 评论者
  users: Users!
  # 父评论ID
  parent: Comments
  # 父Comments对象
  parent1: Comments!
  # 评论文章
  posts: Posts!
}

# 标签表
type Tags {
  id: Int!
  # 标签名称
  name: String!
  postList: String!
  createdAt: DateTime!
  # 多对多关联的Posts列表
  postsList: [Posts]!
  # 关联的PostTags列表
  postTagsList: [PostTags]!
}

# ------------------ 连接和边类型（游标分页） ------------------

# Comments分页结果
type CommentsPage {
  items: [Comments!]!  # 直接返回Comments对象数组
  pageInfo: PageInfo!
  total: Int!
}

# Comments分组结果
type CommentsGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# Tags分页结果
type TagsPage {
  items: [Tags!]!  # 直接返回Tags对象数组
  pageInfo: PageInfo!
  total: Int!
}

# Tags分组结果
type TagsGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# Organizations分页结果
type OrganizationsPage {
  items: [Organizations!]!  # 直接返回Organizations对象数组
  pageInfo: PageInfo!
  total: Int!
}

# Organizations分组结果
type OrganizationsGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# Users分页结果
type UsersPage {
  items: [Users!]!  # 直接返回Users对象数组
  pageInfo: PageInfo!
  total: Int!
}

# Users分组结果
type UsersGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# Posts分页结果
type PostsPage {
  items: [Posts!]!  # 直接返回Posts对象数组
  pageInfo: PageInfo!
  total: Int!
}

# Posts分组结果
type PostsGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# PostTags分页结果
type PostTagsPage {
  items: [PostTags!]!  # 直接返回PostTags对象数组
  pageInfo: PageInfo!
  total: Int!
}

# PostTags分组结果
type PostTagsGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# ------------------ 聚合函数相关类型 ------------------

# 数值聚合结果
type NumberStats {
  sum: Float  # 总和
  avg: Float  # 平均值
  min: Float  # 最小值
  max: Float  # 最大值
  count: Int!  # 计数
  countDistinct: Int!  # 去重计数
}

# 日期聚合结果
type DateTimeStats {
  min: DateTime  # 最早时间
  max: DateTime  # 最晚时间
  count: Int!  # 计数
  countDistinct: Int!  # 去重计数
}

# 字符串聚合结果
type StringStats {
  min: String  # 最小值(按字典序)
  max: String  # 最大值(按字典序)
  count: Int!  # 计数
  countDistinct: Int!  # 去重计数
}

# Comments聚合
type CommentsStats {
  count: Int!
  createdAt: DateTimeStats
  content: StringStats
  userId: NumberStats
  parentId: NumberStats
  id: NumberStats
  postId: NumberStats
  # 分组聚合
  groupBy: [CommentsGroup!]
}

# Comments分组结果
type CommentsGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# Tags聚合
type TagsStats {
  count: Int!
  id: NumberStats
  name: StringStats
  postList: StringStats
  createdAt: DateTimeStats
  # 分组聚合
  groupBy: [TagsGroup!]
}

# Tags分组结果
type TagsGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# Organizations聚合
type OrganizationsStats {
  count: Int!
  name: StringStats
  id: NumberStats
  parentId: NumberStats
  createdAt: DateTimeStats
  # 分组聚合
  groupBy: [OrganizationsGroup!]
}

# Organizations分组结果
type OrganizationsGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# Users聚合
type UsersStats {
  count: Int!
  email: StringStats
  updatedAt: DateTimeStats
  createdAt: DateTimeStats
  name: StringStats
  id: NumberStats
  # 分组聚合
  groupBy: [UsersGroup!]
}

# Users分组结果
type UsersGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# Posts聚合
type PostsStats {
  count: Int!
  content: StringStats
  tagList: StringStats
  createdAt: DateTimeStats
  userId: NumberStats
  title: StringStats
  id: NumberStats
  # 分组聚合
  groupBy: [PostsGroup!]
}

# Posts分组结果
type PostsGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# PostTags聚合
type PostTagsStats {
  count: Int!
  createdAt: DateTimeStats
  postId: NumberStats
  tagId: NumberStats
  # 分组聚合
  groupBy: [PostTagsGroup!]
}

# PostTags分组结果
type PostTagsGroup {
  key: Json!  # 分组键
  count: Int!  # 计数
  # 可以包含其他聚合字段
}

# ------------------ 过滤器类型定义 ------------------

# String过滤器
input StringFilter {
  is: IsInput  # Is value null (true) or not null (false)
  eq: String  # Equals value
  in: [String!]  # Is in list of values
  is: IsInput  # Is value null (true) or not null (false)
  hasKey: String  # Value is a JSON object with the specified key
  hasKeyAny: String  # Value is a JSON object with any of the specified keys
  hasKeyAll: String  # Value is a JSON object with all of the specified keys
  ne: String  # Does not equal value
  like: String  # Value matching pattern where '%' represents zero or more characters and '_' represents a single character. Eg. '_r%' finds values having 'r' in second position
  iLike: String  # Value matching (case-insensitive) pattern where '%' represents zero or more characters and '_' represents a single character. Eg. '_r%' finds values not having 'r' in second position
  regex: String  # Value matching regular pattern
  iRegex: String  # Value matching (case-insensitive) regex pattern
  hasKey: String  # Value is a JSON object with the specified key
  hasKeyAny: String  # Value is a JSON object with any of the specified keys
  hasKeyAll: String  # Value is a JSON object with all of the specified keys
}

# Boolean过滤器
input BooleanFilter {
  eq: Boolean  # Equals value
  in: [Boolean!]  # Is in list of values
}

# Json过滤器
input JsonFilter {
  eq: Json  # Equals value
  in: [Json!]  # Is in list of values
  is: IsInput  # Is value null (true) or not null (false)
  hasKey: String  # Value is a JSON object with the specified key
  hasKeyAny: String  # Value is a JSON object with any of the specified keys
  hasKeyAll: String  # Value is a JSON object with all of the specified keys
}

# ID过滤器
input IDFilter {
  eq: ID  # Equals value
  in: [ID!]  # Is in list of values
  is: IsInput  # Is value null (true) or not null (false)
  hasKey: String  # Value is a JSON object with the specified key
  hasKeyAny: String  # Value is a JSON object with any of the specified keys
  hasKeyAll: String  # Value is a JSON object with all of the specified keys
}

# Int过滤器
input IntFilter {
  is: IsInput  # Is value null (true) or not null (false)
  eq: Int  # Equals value
  in: [Int!]  # Is in list of values
  is: IsInput  # Is value null (true) or not null (false)
  hasKey: String  # Value is a JSON object with the specified key
  hasKeyAny: String  # Value is a JSON object with any of the specified keys
  hasKeyAll: String  # Value is a JSON object with all of the specified keys
  ne: Int  # Does not equal value
}

# Float过滤器
input FloatFilter {
  is: IsInput  # Is value null (true) or not null (false)
  eq: Float  # Equals value
  in: [Float!]  # Is in list of values
  is: IsInput  # Is value null (true) or not null (false)
  hasKey: String  # Value is a JSON object with the specified key
  hasKeyAny: String  # Value is a JSON object with any of the specified keys
  hasKeyAll: String  # Value is a JSON object with all of the specified keys
  ne: Float  # Does not equal value
}

# DateTime过滤器
input DateTimeFilter {
  is: IsInput  # Is value null (true) or not null (false)
  eq: DateTime  # Equals value
  in: [DateTime!]  # Is in list of values
  is: IsInput  # Is value null (true) or not null (false)
  hasKey: String  # Value is a JSON object with the specified key
  hasKeyAny: String  # Value is a JSON object with any of the specified keys
  hasKeyAll: String  # Value is a JSON object with all of the specified keys
  ne: DateTime  # Does not equal value
}

# PostTags查询条件
input PostTagsFilter {
  createdAt: DateTimeFilter
  postId: IntFilter
  tagId: IntFilter
  and: [PostTagsFilter!]
  or: [PostTagsFilter!]
  not: PostTagsFilter
}

# Comments查询条件
input CommentsFilter {
  userId: IntFilter
  parentId: IntFilter
  id: IntFilter
  postId: IntFilter
  createdAt: DateTimeFilter
  content: StringFilter
  and: [CommentsFilter!]
  or: [CommentsFilter!]
  not: CommentsFilter
}

# Tags查询条件
input TagsFilter {
  name: StringFilter
  postList: StringFilter
  createdAt: DateTimeFilter
  id: IntFilter
  and: [TagsFilter!]
  or: [TagsFilter!]
  not: TagsFilter
}

# Organizations查询条件
input OrganizationsFilter {
  id: IntFilter
  parentId: IntFilter
  createdAt: DateTimeFilter
  name: StringFilter
  and: [OrganizationsFilter!]
  or: [OrganizationsFilter!]
  not: OrganizationsFilter
}

# Users查询条件
input UsersFilter {
  email: StringFilter
  updatedAt: DateTimeFilter
  createdAt: DateTimeFilter
  name: StringFilter
  id: IntFilter
  and: [UsersFilter!]
  or: [UsersFilter!]
  not: UsersFilter
}

# Posts查询条件
input PostsFilter {
  createdAt: DateTimeFilter
  userId: IntFilter
  title: StringFilter
  id: IntFilter
  content: StringFilter
  tagList: StringFilter
  and: [PostsFilter!]
  or: [PostsFilter!]
  not: PostsFilter
}

# Comments排序
input CommentsSort {
  id: SortDirection
  postId: SortDirection
  createdAt: SortDirection
  content: SortDirection
  userId: SortDirection
  parentId: SortDirection
}

# Tags排序
input TagsSort {
  id: SortDirection
  name: SortDirection
  postList: SortDirection
  createdAt: SortDirection
}

# Organizations排序
input OrganizationsSort {
  id: SortDirection
  parentId: SortDirection
  createdAt: SortDirection
  name: SortDirection
}

# Users排序
input UsersSort {
  name: SortDirection
  id: SortDirection
  email: SortDirection
  updatedAt: SortDirection
  createdAt: SortDirection
}

# Posts排序
input PostsSort {
  createdAt: SortDirection
  userId: SortDirection
  title: SortDirection
  id: SortDirection
  content: SortDirection
  tagList: SortDirection
}

# PostTags排序
input PostTagsSort {
  tagId: SortDirection
  createdAt: SortDirection
  postId: SortDirection
}

# Posts创建输入
input PostsCreateInput {
  content: String
  tagList: String!
  createdAt: DateTime!
  userId: Int!
  title: String!
  id: Int!
}

# Posts更新输入
input PostsUpdateInput {
  title: String
  content: String
  tagList: String
  userId: Int
}

# PostTags创建输入
input PostTagsCreateInput {
  createdAt: DateTime!
  postId: Int!
  tagId: Int!
}

# PostTags更新输入
input PostTagsUpdateInput {
  postId: Int
  tagId: Int
}

# Comments创建输入
input CommentsCreateInput {
  content: String!
  userId: Int!
  parentId: Int
  id: Int!
  postId: Int!
  createdAt: DateTime!
}

# Comments更新输入
input CommentsUpdateInput {
  content: String
  userId: Int
  parentId: Int
  postId: Int
}

# Tags创建输入
input TagsCreateInput {
  id: Int!
  name: String!
  postList: String!
  createdAt: DateTime!
}

# Tags更新输入
input TagsUpdateInput {
  name: String
  postList: String
}

# Organizations创建输入
input OrganizationsCreateInput {
  id: Int!
  parentId: Int
  createdAt: DateTime!
  name: String!
}

# Organizations更新输入
input OrganizationsUpdateInput {
  parentId: Int
  name: String
}

# Users创建输入
input UsersCreateInput {
  updatedAt: DateTime
  createdAt: DateTime!
  name: String!
  id: Int!
  email: String!
}

# Users更新输入
input UsersUpdateInput {
  email: String
  name: String
}

# 关联操作
input ConnectInput {
  id: ID!
}

# 关系操作
input RelationInput {
  connect: [ID!]
  disconnect: [ID!]
}

# ------------------ 查询和变更 ------------------

# 查询根类型
type Query {
  # 单个Comments查询
  comments(id: ID!): Comments

  # Comments列表查询
  comments(
    filter: CommentsFilter
    sort: [CommentsSort!]
    limit: Int
    offset: Int
    first: Int
    last: Int
    after: Cursor
    before: Cursor
  ): CommentsPage!

  # Comments统计查询
  commentsStats(filter: CommentsFilter, groupBy: GroupBy): CommentsStats!
  # 单个Tags查询
  tags(id: ID!): Tags

  # Tags列表查询
  tags(
    filter: TagsFilter
    sort: [TagsSort!]
    limit: Int
    offset: Int
    first: Int
    last: Int
    after: Cursor
    before: Cursor
  ): TagsPage!

  # Tags统计查询
  tagsStats(filter: TagsFilter, groupBy: GroupBy): TagsStats!
  # 单个Organizations查询
  organizations(id: ID!): Organizations

  # Organizations列表查询
  organizations(
    filter: OrganizationsFilter
    sort: [OrganizationsSort!]
    limit: Int
    offset: Int
    first: Int
    last: Int
    after: Cursor
    before: Cursor
  ): OrganizationsPage!

  # Organizations统计查询
  organizationsStats(filter: OrganizationsFilter, groupBy: GroupBy): OrganizationsStats!
  # 单个Users查询
  users(id: ID!): Users

  # Users列表查询
  users(
    filter: UsersFilter
    sort: [UsersSort!]
    limit: Int
    offset: Int
    first: Int
    last: Int
    after: Cursor
    before: Cursor
  ): UsersPage!

  # Users统计查询
  usersStats(filter: UsersFilter, groupBy: GroupBy): UsersStats!
  # 单个Posts查询
  posts(id: ID!): Posts

  # Posts列表查询
  posts(
    filter: PostsFilter
    sort: [PostsSort!]
    limit: Int
    offset: Int
    first: Int
    last: Int
    after: Cursor
    before: Cursor
  ): PostsPage!

  # Posts统计查询
  postsStats(filter: PostsFilter, groupBy: GroupBy): PostsStats!
  # 单个PostTags查询
  postTags(id: ID!): PostTags

  # PostTags列表查询
  postTags(
    filter: PostTagsFilter
    sort: [PostTagsSort!]
    limit: Int
    offset: Int
    first: Int
    last: Int
    after: Cursor
    before: Cursor
  ): PostTagsPage!

  # PostTags统计查询
  postTagsStats(filter: PostTagsFilter, groupBy: GroupBy): PostTagsStats!
}

# 变更根类型
type Mutation {
  # PostTags创建
  createPostTags(data: PostTagsCreateInput!): PostTags!

  # PostTags更新
  updatePostTags(id: ID!, data: PostTagsUpdateInput!): PostTags!

  # PostTags删除
  deletePostTags(id: ID!): Boolean!

  # PostTags批量删除
  deletePostTags(filter: PostTagsFilter!): Int!
  # Comments创建
  createComments(data: CommentsCreateInput!): Comments!

  # Comments更新
  updateComments(id: ID!, data: CommentsUpdateInput!): Comments!

  # Comments删除
  deleteComments(id: ID!): Boolean!

  # Comments批量删除
  deleteComments(filter: CommentsFilter!): Int!
  # Tags创建
  createTags(data: TagsCreateInput!): Tags!

  # Tags更新
  updateTags(id: ID!, data: TagsUpdateInput!): Tags!

  # Tags删除
  deleteTags(id: ID!): Boolean!

  # Tags批量删除
  deleteTags(filter: TagsFilter!): Int!
  # Organizations创建
  createOrganizations(data: OrganizationsCreateInput!): Organizations!

  # Organizations更新
  updateOrganizations(id: ID!, data: OrganizationsUpdateInput!): Organizations!

  # Organizations删除
  deleteOrganizations(id: ID!): Boolean!

  # Organizations批量删除
  deleteOrganizations(filter: OrganizationsFilter!): Int!
  # Users创建
  createUsers(data: UsersCreateInput!): Users!

  # Users更新
  updateUsers(id: ID!, data: UsersUpdateInput!): Users!

  # Users删除
  deleteUsers(id: ID!): Boolean!

  # Users批量删除
  deleteUsers(filter: UsersFilter!): Int!
  # Posts创建
  createPosts(data: PostsCreateInput!): Posts!

  # Posts更新
  updatePosts(id: ID!, data: PostsUpdateInput!): Posts!

  # Posts删除
  deletePosts(id: ID!): Boolean!

  # Posts批量删除
  deletePosts(filter: PostsFilter!): Int!
}
